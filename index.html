<!doctype html><head><link href="https://static.contentful.com/app/main-62e0abc7.css" media="all" rel="stylesheet" type="text/css"><link href="https://static.contentful.com/app/vendor-976872d7.css" media="all" rel="stylesheet" type="text/css"><link href="https://contentful.github.io/ui-extensions-sdk/cf-extension.css" media="all" rel="stylesheet" type="text/css"><script type="text/javascript" src="https://unpkg.com/contentful-ui-extensions-sdk@3"></script></head><div class="widget-slug-editor"> news/detail/<input id="slug" type="text" class="form-control" style="width:98%;font-size:14px"> <i id="error" class="fa fa-exclamation-triangle is-slug-duplicate"></i> <i id="ok" class="fa fa-check-circle is-slug-unique"></i> <i id="loading" class="fa fa-spin fa-spinner"></i> </div><script src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/3.0.2/es6-promise.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/speakingurl/7.0.0/speakingurl.min.js"></script><script>var e=window.contentfulExtension||window.contentfulWidget;e.init((function(e){var n=e.field,t=e.contentType.displayField,o=e.entry.fields[t],i=window._,d=window.getSlug,l=i.debounce(c,500),u=document.getElementById("slug"),s={error:document.getElementById("error"),ok:document.getElementById("ok"),loading:document.getElementById("loading")};function r(e){var t;t=d(e||""),u.value=t,n.setValue(t),a("loading"),l("news/detail/"+t)}function c(t){(function(t){if(!t)return Promise.resolve(!1);var o={};return o.content_type=e.entry.getSys().contentType.sys.id,o["fields."+n.id]=t,o["sys.id[ne]"]=e.entry.getSys().id,o["sys.publishedAt[exists]"]=!0,e.space.getEntries(o).then((function(e){return e.total>0}))})(t).then((function(e){a(e?"error":"ok")}))}function a(e){i.each(s,(function(n,t){n.style.display=t===e?"inline":"none"}))}e.window.updateHeight(),o.onValueChanged(r),u.addEventListener("input",(function(){console.log("input"),r(u.value)})),u.addEventListener("change",(function(){console.log("change"),r(u.value)})),c(n.getValue())}));</script>